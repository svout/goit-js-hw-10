{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["const dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\nconst startBtn = document.getElementById('startBtn');\nconst input = document.getElementById('datetime-picker');\n\n\nstartBtn.disabled = true;\n\nlet userSelectedDate = new Date(); \n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        if (selectedDates[0] < new Date()) {\n            iziToast.error({\n                message: 'Please choose a date in the future',\n                position: \"topRight\",\n            });\n            updateStartBtn(false);\n        } else {\n            updateStartBtn(true);\n            userSelectedDate = new Date(selectedDates[0]); \n        }\n    },\n};\n\nlet flatpickrInstance = flatpickr(input, options); \n\nclass Timer {\n    constructor(updateTimer) {\n        this.updateTimer = updateTimer;\n        this.isActive = false;\n    }\n\n    start() {\n        if (this.isActive) return;\n        this.isActive = true;\n        updateStateInput(false);\n        updateStartBtn(false);\n        this.intervalId = setInterval(() => {\n            this.updateTime();\n        }, 1000);\n    }\n\n    stop() {\n        clearInterval(this.intervalId);\n        this.isActive = false;\n        updateStateInput(true);\n        updateStartBtn(true);\n    }\n\n    #msToTime(s) {\n        const ms = s % 1000;\n        s = (s - ms) / 1000;\n        const secs = s % 60;\n        s = (s - secs) / 60;\n        const mins = s % 60;\n        s = (s - mins) / 60;\n        const hrs = s % 24;\n        const days = (s - hrs) / 24;\n\n        return { days, hrs, mins, secs };\n    }\n\n\n    updateTime() {\n        const target = userSelectedDate.getTime(); \n        const now = Date.now();\n        if (target <= now) {\n            this.stop();\n            return;\n        }\n        const diff = target - now;\n        const timeObj = this.#msToTime(diff);\n        this.updateTimer(timeObj);\n    }\n}\n\nconst timer = new Timer(updateDisplay);\n\nstartBtn.addEventListener('click', () => {\n    timer.start();\n});\n\nfunction updateDisplay({ days, hrs, mins, secs }) {\n    const timeDays = addZero(days);\n    const timeHrs = addZero(hrs);\n    const timeMins = addZero(mins);\n    const timeSecs = addZero(secs);\n\n    dataDays.textContent = timeDays;\n    dataHours.textContent = timeHrs;\n    dataMinutes.textContent = timeMins;\n    dataSeconds.textContent = timeSecs;\n}\n\nfunction addZero(num) {\n    return num.toString().padStart(2, '0');\n}\n\nfunction updateStartBtn(isActive) {\n    startBtn.disabled = !isActive;\n}\n\nfunction updateStateInput(isActive) {\n    input.disabled = !isActive;\n}\n\n"],"names":["dataDays","dataHours","dataMinutes","dataSeconds","startBtn","input","userSelectedDate","options","selectedDates","updateStartBtn","Timer","updateTimer","__privateAdd","_msToTime","updateStateInput","target","now","diff","timeObj","__privateMethod","msToTime_fn","s","ms","secs","mins","hrs","timer","updateDisplay","days","timeDays","addZero","timeHrs","timeMins","timeSecs","num","isActive"],"mappings":"4SAAA,MAAMA,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAW,SAAS,eAAe,UAAU,EAC7CC,EAAQ,SAAS,eAAe,iBAAiB,EAGvDD,EAAS,SAAW,GAEpB,IAAIE,EAAmB,IAAI,KAE3B,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACfA,EAAc,CAAC,EAAI,IAAI,MACvB,SAAS,MAAM,CACX,QAAS,qCACT,SAAU,UAC1B,CAAa,EACDC,EAAe,EAAK,IAEpBA,EAAe,EAAI,EACnBH,EAAmB,IAAI,KAAKE,EAAc,CAAC,CAAC,EAEnD,CACL,EAEwB,UAAUH,EAAOE,CAAO,UAEhD,MAAMG,CAAM,CACR,YAAYC,EAAa,CAsBzBC,EAAA,KAAAC,GArBI,KAAK,YAAcF,EACnB,KAAK,SAAW,EACnB,CAED,OAAQ,CACA,KAAK,WACT,KAAK,SAAW,GAChBG,EAAiB,EAAK,EACtBL,EAAe,EAAK,EACpB,KAAK,WAAa,YAAY,IAAM,CAChC,KAAK,WAAU,CAClB,EAAE,GAAI,EACV,CAED,MAAO,CACH,cAAc,KAAK,UAAU,EAC7B,KAAK,SAAW,GAChBK,EAAiB,EAAI,EACrBL,EAAe,EAAI,CACtB,CAgBD,YAAa,CACT,MAAMM,EAAST,EAAiB,UAC1BU,EAAM,KAAK,MACjB,GAAID,GAAUC,EAAK,CACf,KAAK,KAAI,EACT,MACH,CACD,MAAMC,EAAOF,EAASC,EAChBE,EAAUC,EAAA,KAAKN,EAAAO,GAAL,UAAeH,GAC/B,KAAK,YAAYC,CAAO,CAC3B,CACL,CAzBIL,EAAA,YAAAO,EAAS,SAACC,EAAG,CACT,MAAMC,EAAKD,EAAI,IACfA,GAAKA,EAAIC,GAAM,IACf,MAAMC,EAAOF,EAAI,GACjBA,GAAKA,EAAIE,GAAQ,GACjB,MAAMC,EAAOH,EAAI,GACjBA,GAAKA,EAAIG,GAAQ,GACjB,MAAMC,EAAMJ,EAAI,GAGhB,MAAO,CAAE,MAFKA,EAAII,GAAO,GAEV,IAAAA,EAAK,KAAAD,EAAM,KAAAD,CAAI,CACjC,EAgBL,MAAMG,EAAQ,IAAIhB,EAAMiB,CAAa,EAErCvB,EAAS,iBAAiB,QAAS,IAAM,CACrCsB,EAAM,MAAK,CACf,CAAC,EAED,SAASC,EAAc,CAAE,KAAAC,EAAM,IAAAH,EAAK,KAAAD,EAAM,KAAAD,CAAI,EAAI,CAC9C,MAAMM,EAAWC,EAAQF,CAAI,EACvBG,EAAUD,EAAQL,CAAG,EACrBO,EAAWF,EAAQN,CAAI,EACvBS,EAAWH,EAAQP,CAAI,EAE7BvB,EAAS,YAAc6B,EACvB5B,EAAU,YAAc8B,EACxB7B,EAAY,YAAc8B,EAC1B7B,EAAY,YAAc8B,CAC9B,CAEA,SAASH,EAAQI,EAAK,CAClB,OAAOA,EAAI,SAAU,EAAC,SAAS,EAAG,GAAG,CACzC,CAEA,SAASzB,EAAe0B,EAAU,CAC9B/B,EAAS,SAAW,CAAC+B,CACzB,CAEA,SAASrB,EAAiBqB,EAAU,CAChC9B,EAAM,SAAW,CAAC8B,CACtB"}